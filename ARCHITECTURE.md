# ğŸ—ï¸ Architecture Projet DataCenter

## Diagramme d'Architecture Global

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIENT (Navigateur Web)                     â”‚
â”‚                                                                 â”‚
â”‚  HTML (Blade) + CSS PersonnalisÃ© + Vanilla JS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    HTTP Request/Response
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LARAVEL APPLICATION                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. ROUTING (routes/web.php)                              â”‚  â”‚
â”‚  â”‚    â”œâ”€ Public Routes (/, /login, /register)              â”‚  â”‚
â”‚  â”‚    â”œâ”€ Authenticated (middleware: auth)                  â”‚  â”‚
â”‚  â”‚    â”œâ”€ Admin Only (middleware: auth, role:Admin)         â”‚  â”‚
â”‚  â”‚    â””â”€ Responsable Only (middleware: auth, role:...)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. MIDDLEWARE                                            â”‚  â”‚
â”‚  â”‚    â”œâ”€ Authenticate (verify session)                     â”‚  â”‚
â”‚  â”‚    â”œâ”€ CheckRole (verify role permissions)               â”‚  â”‚
â”‚  â”‚    â”œâ”€ VerifyCsrfToken (CSRF protection)                â”‚  â”‚
â”‚  â”‚    â””â”€ Autres (TrimStrings, EncryptCookies...)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3. CONTROLLERS (app/Http/Controllers/)                   â”‚  â”‚
â”‚  â”‚    â”œâ”€ ReservationController (CRUD + approve/reject)     â”‚  â”‚
â”‚  â”‚    â”œâ”€ DashboardController (3 dashboards)                â”‚  â”‚
â”‚  â”‚    â”œâ”€ ResourceController (CRUD)                         â”‚  â”‚
â”‚  â”‚    â”œâ”€ CategoryController (Index/Show)                   â”‚  â”‚
â”‚  â”‚    â”œâ”€ NotificationController                            â”‚  â”‚
â”‚  â”‚    â”œâ”€ MaintenanceController                             â”‚  â”‚
â”‚  â”‚    â””â”€ Admin/UserController                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 4. MODELS & ELOQUENT ORM (app/Models/)                   â”‚  â”‚
â”‚  â”‚    â”œâ”€ User                                               â”‚  â”‚
â”‚  â”‚    â”œâ”€ Role                                               â”‚  â”‚
â”‚  â”‚    â”œâ”€ Reservation                                        â”‚  â”‚
â”‚  â”‚    â”œâ”€ Resource                                           â”‚  â”‚
â”‚  â”‚    â”œâ”€ Category                                           â”‚  â”‚
â”‚  â”‚    â”œâ”€ Maintenance                                        â”‚  â”‚
â”‚  â”‚    â””â”€ Notification                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE (MySQL)                             â”‚
â”‚                                                                 â”‚
â”‚  users â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€ roles                                        â”‚
â”‚          â”‚                                                      â”‚
â”‚  reservations â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€ resources â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€ categories        â”‚
â”‚                 â”‚                    â”‚                          â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€ maintenances                          â”‚
â”‚                                                                 â”‚
â”‚  notifications â”€â”€â”€â”€â”€â”€â”€â”€ users                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flux de DonnÃ©es - CrÃ©ation RÃ©servation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USER INTERFACE                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ Form: Select Resource, Dates, Justification    â”‚  â”‚
â”‚    â”‚ Validation: HTML5 (required, min, datetime)    â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    POST /reservations
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. CONTROLLER (ReservationController@store)             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ a. Validate Input                              â”‚  â”‚
â”‚    â”‚    - resource_id exists                        â”‚  â”‚
â”‚    â”‚    - date_start > now                          â”‚  â”‚
â”‚    â”‚    - date_end > date_start                     â”‚  â”‚
â”‚    â”‚    - justification min:10, max:500             â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚ b. Check Conflicts                             â”‚  â”‚
â”‚    â”‚    - Query Reservation::where(...)             â”‚  â”‚
â”‚    â”‚    - Check overlap (between/where conditions)  â”‚  â”‚
â”‚    â”‚    - If conflict: redirect with error          â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚ c. Create Reservation                          â”‚  â”‚
â”‚    â”‚    - Set status: 'pending'                     â”‚  â”‚
â”‚    â”‚    - Save to database                          â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚ d. Notify Admins                               â”‚  â”‚
â”‚    â”‚    - Create Notification records               â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                   save() / create()
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. MODEL (Reservation Model)                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ - Define attributes (fillable)                 â”‚  â”‚
â”‚    â”‚ - Define relationships (belongsTo)             â”‚  â”‚
â”‚    â”‚ - Trigger mutators/events                      â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    INSERT SQL
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. DATABASE                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ INSERT INTO reservations                       â”‚  â”‚
â”‚    â”‚ (user_id, resource_id, date_start, date_end,  â”‚  â”‚
â”‚    â”‚  status, justification, created_at, updated_atâ”‚  â”‚
â”‚    â”‚ VALUES (...)                                   â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                   redirect() + session()
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. RESPONSE                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ Redirect to /reservations                      â”‚  â”‚
â”‚    â”‚ Flash message: "RÃ©servation crÃ©Ã©e avec succÃ¨s" â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. USER SEES SUCCESS MESSAGE                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ Green alert + Table updated with new entry     â”‚  â”‚
â”‚    â”‚ Status: PENDING â³                              â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flux d'Approbation RÃ©servation (Admin)

```
Admin Views Reservation (pending)
         â”‚
         â–¼
Click "Approuver"
         â”‚
         â–¼
POST /reservations/{id}/approve
         â”‚
         â–¼
ReservationController@approve
  â”‚
  â”œâ”€ Update status to 'approved'
  â”‚
  â”œâ”€ Create Notification for user
  â”‚
  â””â”€ Redirect with success
         â”‚
         â–¼
User receives notification
  "Votre rÃ©servation a Ã©tÃ© approuvÃ©e"
```

---

## HiÃ©rarchie des RÃ´les & Permissions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RÃ”LES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1. ADMIN (ID: 4)                                        â”‚
â”‚     â””â”€ Toutes les permissions                           â”‚
â”‚        â”œâ”€ /admin/dashboard                             â”‚
â”‚        â”œâ”€ Gestion utilisateurs (/admin/users)          â”‚
â”‚        â”œâ”€ Gestion ressources (/resources)              â”‚
â”‚        â”œâ”€ Approuver rÃ©servations                       â”‚
â”‚        â”œâ”€ Rejeter rÃ©servations                         â”‚
â”‚        â””â”€ Supprimer rÃ©servations                       â”‚
â”‚                                                          â”‚
â”‚  2. RESPONSABLE (ID: 3)                                 â”‚
â”‚     â””â”€ Permissions limitÃ©es                            â”‚
â”‚        â”œâ”€ /responsable/dashboard                       â”‚
â”‚        â”œâ”€ Voir ressources                              â”‚
â”‚        â”œâ”€ Approuver rÃ©servations (ressources liÃ©es)   â”‚
â”‚        â”œâ”€ GÃ©rer maintenances                           â”‚
â”‚        â””â”€ Voir notifications                           â”‚
â”‚                                                          â”‚
â”‚  3. USER / INTERNAL (ID: 2)                             â”‚
â”‚     â””â”€ Permissions minimales                           â”‚
â”‚        â”œâ”€ /dashboard (propre)                          â”‚
â”‚        â”œâ”€ CrÃ©er rÃ©servations                           â”‚
â”‚        â”œâ”€ Voir ses rÃ©servations                        â”‚
â”‚        â”œâ”€ Voir ressources disponibles                  â”‚
â”‚        â””â”€ Voir notifications                           â”‚
â”‚                                                          â”‚
â”‚  4. GUEST (ID: 1) [Non utilisÃ© actuellement]           â”‚
â”‚     â””â”€ Pas d'accÃ¨s authentifiÃ©                         â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MIDDLEWARE CHECK:
  if (Auth::user()->role->name === 'Admin') { ... }
  OR
  if (Auth::user()->isAdmin()) { ... }
  OR
  middleware('role:Admin')
```

---

## Structure CSS

```
public/css/
â”œâ”€ style.css (existant - reset + base)
â””â”€ app.css (nouveau - complet ~1000 lignes)
    â”œâ”€ Variables CSS
    â”‚   â””â”€ Colors, shadows, etc.
    â”‚
    â”œâ”€ Layout
    â”‚   â”œâ”€ Body
    â”‚   â”œâ”€ Container
    â”‚   â””â”€ Sections
    â”‚
    â”œâ”€ Navigation
    â”‚   â””â”€ Nav, nav-left, nav-right
    â”‚
    â”œâ”€ Components
    â”‚   â”œâ”€ Buttons (6 types)
    â”‚   â”œâ”€ Forms
    â”‚   â”œâ”€ Cards
    â”‚   â”œâ”€ Tables
    â”‚   â”œâ”€ Status Badges (8 statuts)
    â”‚   â”œâ”€ Alerts (4 types)
    â”‚   â””â”€ Modals
    â”‚
    â”œâ”€ Dashboard
    â”‚   â”œâ”€ Stats Grid
    â”‚   â”œâ”€ Stat Cards
    â”‚   â””â”€ Dashboard Sections
    â”‚
    â”œâ”€ Dark Mode
    â”‚   â””â”€ body.dark overrides
    â”‚
    â””â”€ Responsive
        â”œâ”€ 768px (tablet)
        â””â”€ 480px (mobile)
```

---

## Flux d'Authentification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Non AuthentifiÃ©   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    GET / redirect /login
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Login Form          â”‚
    â”‚ (email, password)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    POST /login
             â”‚
             â–¼
    Auth::attempt()
      â”‚
      â”œâ”€ Check user exists
      â”œâ”€ Check password matches
      â””â”€ Create session
             â”‚
             â–¼
    Session Created
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User AuthentifiÃ©       â”‚
    â”‚ Session: user_id       â”‚
    â”‚ Auth::check() = true   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    middleware('auth') allow
             â”‚
             â–¼
    Access protected routes
```

---

## Flux de SÃ©curitÃ©

```
REQUEST â†’ MIDDLEWARE STACK â†’ CONTROLLER â†’ RESPONSE

1. Authenticate Middleware
   â”œâ”€ Check session exists
   â”œâ”€ Check session valid
   â””â”€ Redirect to /login if not

2. CheckRole Middleware
   â”œâ”€ Extract required roles
   â”œâ”€ Get user role
   â”œâ”€ Compare with required
   â””â”€ Abort 403 if not match

3. CSRF Middleware
   â”œâ”€ Check X-CSRF-TOKEN
   â”œâ”€ Validate against session
   â””â”€ Abort 419 if invalid

4. Controller Method
   â”œâ”€ Validate input
   â”œâ”€ Check ownership
   â””â”€ Execute action

5. Database Query
   â”œâ”€ Escape inputs (prepared statements)
   â”œâ”€ Use Eloquent ORM
   â””â”€ Check results
```

---

## SchÃ©ma Relationnel - Simplified

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ROLES     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚
â”‚ name        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ hasMany
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USERS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚
â”‚ name        â”‚
â”‚ email (UNQ) â”‚
â”‚ password    â”‚
â”‚ role_id(FK) â”‚â”€â”€â”
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚             â””â”€â†’ ROLE (belongsTo)
   â”‚
   â”œâ”€ hasMany RESERVATIONS
   â”‚  
   â””â”€ hasMany NOTIFICATIONS


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CATEGORIES  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ name         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ hasMany
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESOURCES   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤RESERVATIONS  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚         â”‚ id (PK)      â”‚
â”‚ name         â”‚         â”‚ user_id(FK)  â”‚
â”‚ category_id  â”‚         â”‚ resource_id  â”‚
â”‚ cpu          â”‚         â”‚ date_start   â”‚
â”‚ ram          â”‚         â”‚ date_end     â”‚
â”‚ storage      â”‚         â”‚ status       â”‚
â”‚ status       â”‚         â”‚ justificationâ”‚
â”‚ description  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ location     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ hasMany RESERVATIONS
       â”‚
       â””â”€ hasMany MAINTENANCES


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MAINTENANCES  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚resource_id(FK)
â”‚ date_start   â”‚
â”‚ date_end     â”‚
â”‚ description  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚NOTIFICATIONS â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ user_id(FK)  â”‚
â”‚ message      â”‚
â”‚ is_read      â”‚
â”‚ created_at   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Cycle de Vie d'une RÃ©servation

```
Created (pending)
     â”‚
     â”œâ”€ [Admin approves]
     â”‚   â””â”€â†’ approved
     â”‚       â”œâ”€ [Time passes]
     â”‚       â”‚   â””â”€â†’ active [auto-set if current]
     â”‚       â”‚       â””â”€â†’ finished [auto-set when expired]
     â”‚       â”‚
     â”‚       â””â”€ [Admin rejects anytime]
     â”‚           â””â”€â†’ rejected
     â”‚
     â””â”€ [Admin rejects]
         â””â”€â†’ rejected
```

---

## Fichiers & DÃ©pendances

```
PROJECT ROOT
â”œâ”€ .github/
â”‚  â””â”€ copilot-instructions.md (Guide IA)
â”‚
â”œâ”€ app/
â”‚  â”œâ”€ Http/
â”‚  â”‚  â”œâ”€ Controllers/
â”‚  â”‚  â”‚  â”œâ”€ ReservationController.php (NOUVEAU)
â”‚  â”‚  â”‚  â”œâ”€ DashboardController.php (REMPLACÃ‰)
â”‚  â”‚  â”‚  â””â”€ ... autres
â”‚  â”‚  â”œâ”€ Middleware/
â”‚  â”‚  â”‚  â””â”€ CheckRole.php (CLEF SÃ‰CURITÃ‰)
â”‚  â”‚  â””â”€ Kernel.php (Routes middleware)
â”‚  â”‚
â”‚  â””â”€ Models/
â”‚     â”œâ”€ User.php
â”‚     â”œâ”€ Role.php
â”‚     â”œâ”€ Reservation.php
â”‚     â”œâ”€ Resource.php
â”‚     â””â”€ ...
â”‚
â”œâ”€ routes/
â”‚  â””â”€ web.php (REMPLACÃ‰ - NettoyÃ©)
â”‚
â”œâ”€ resources/views/
â”‚  â”œâ”€ layouts/app.blade.php
â”‚  â”œâ”€ dashboard.blade.php (REMPLACÃ‰)
â”‚  â”œâ”€ admin/
â”‚  â”‚  â””â”€ dashboard.blade.php (REMPLACÃ‰)
â”‚  â”œâ”€ responsable/
â”‚  â”‚  â””â”€ dashboard.blade.php (REMPLACÃ‰)
â”‚  â””â”€ reservations/
â”‚     â”œâ”€ index.blade.php (NOUVEAU)
â”‚     â”œâ”€ create.blade.php (REMPLACÃ‰)
â”‚     â””â”€ show.blade.php (NOUVEAU)
â”‚
â”œâ”€ public/css/
â”‚  â”œâ”€ style.css (Existant)
â”‚  â””â”€ app.css (NOUVEAU ~1000 lignes)
â”‚
â”œâ”€ database/
â”‚  â”œâ”€ migrations/ (9 fichiers)
â”‚  â””â”€ seeders/ (4 fichiers)
â”‚
â”œâ”€ .env (Configuration)
â”œâ”€ composer.json (PHP dÃ©pendances)
â”œâ”€ package.json (JS dÃ©pendances)
â”‚
â”œâ”€ IMPLEMENTATION_COMPLETE.md (Nouveau)
â”œâ”€ README_FINAL.md (Nouveau)
â”œâ”€ TECHNICAL_CHECKLIST.md (Nouveau)
â””â”€ COMMANDS_GUIDE.md (Nouveau)
```

---

## Points d'EntrÃ©e

```
PUBLIC ENTRY:
  web.php â†’ routes
    â”œâ”€ GET / â†’ Redirect /login
    â”œâ”€ GET /login â†’ Show Login Form
    â”œâ”€ GET /register â†’ Show Register Form
    â””â”€ POST /login, /register â†’ Auth

AUTHENTICATED ENTRY:
  /dashboard â†’ DashboardController@index
    â”œâ”€ Admin â†’ Admin Dashboard
    â”œâ”€ Responsable â†’ Responsable Dashboard
    â””â”€ User â†’ User Dashboard

ADMIN ENTRY:
  /admin/dashboard â†’ Admin Dashboard
  /admin/users â†’ User Management
```

---

**Architecture crÃ©Ã©e le**: 16 Janvier 2026  
**Status**: âœ… Production Ready
